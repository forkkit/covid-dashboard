self.webpackChunk([43],{29:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var n=o(7);class a extends n.a{static getConfig(){return{className:"Neo.container.Viewport",ntype:"viewport",applyBodyCls:!0,cls:["neo-viewport"]}}onConstructed(){super.onConstructed(),this.applyBodyCls&&Neo.main.DomAccess.applyBodyCls({appName:this.appName,cls:["neo-body-viewport"]})}}Neo.applyClassConfig(a)},38:function(e,t,o){"use strict";o.d(t,"a",(function(){return g}));var n=o(46),a=o(2),r=o(15),s=o(5),l=o(1);class i extends l.a{static getConfig(){return{className:"Neo.util.Function"}}static bindAppend(e){const t=this,o=[].slice.call(arguments).slice(1);return function(){return t.apply(e,[].slice.call(arguments).concat(o))}}static createSequence(e,t,o,n){let a=e[t]||Neo.emptyFn;return e[t]=function(){return a.apply(this,arguments),o.apply(n||this,arguments)}}static intercept(e,t,o,n){let a=e[t]||Neo.emptyFn;return e[t]=function(){let e=o.apply(n||this,arguments);return a.apply(this,arguments),e}}}Neo.applyClassConfig(i);var c=i;class g extends n.a{static getConfig(){return{className:"Neo.controller.Component",ntype:"component-controller",references:null,view_:null}}constructor(e){super(e);this.references={},c.createSequence(this.view,"onConstructed",this.onViewConstructed,this)}beforeGetView(e,t){return Neo.get(e)}beforeSetView(e,t){return e.id}getParent(e){let t,o=this.view,n=a.a.getParents(o),r=0,s=n.length;for(;r<s;r++)if(t=n[r].controller,t){if(!e)return t;if(e===t.ntype)return t}return null}getParentHandlerScope(e){let t,o=this.view,n=a.a.getParents(o),r=0,s=n.length;for(;r<s;r++)if(t=n[r].controller,t&&t[e])return t;return null}getReference(e){let t,o=this,n=o.references[e];return n&&(t=Neo.getComponent(n)),t||(t=o.view.down({reference:e}),t&&(o.references[e]=t.id)),t||null}onViewConstructed(e){let t,o,n,a,l=this;(e=e||l.view).domListeners=Neo.clone(e.domListeners,!0,!0),t=e.domListeners,t&&(Array.isArray(t)||(t=[t]),t.forEach(t=>{Object.entries(t).forEach(([i,c])=>{o=null,"scope"!==i&&"delegate"!==i&&(Neo.isString(c)?o=c:Neo.isObject(c)&&c.hasOwnProperty("fn")&&Neo.isString(c.fn)&&(o=c.fn),o&&(l[o]?(n=l[o].bind(l),t[i]=n,r.a.updateListenerPlaceholder({componentId:e.id,eventHandlerMethod:n,eventHandlerName:o,eventName:i,scope:l})):(a=l.getParentHandlerScope(o),a?(n=a[o].bind(a),t[i]=n,r.a.updateListenerPlaceholder({componentId:e.id,eventHandlerMethod:n,eventHandlerName:o,eventName:i,scope:a})):s.a.logError("Unknown domEvent handler for",e,o))))})})),e.listeners&&Object.entries(e.listeners).forEach(([t,n])=>{Array.isArray(n)&&n.forEach(t=>{o=null,Neo.isObject(t)&&t.hasOwnProperty("fn")&&Neo.isString(t.fn)&&(o=t.fn,l[o]?t.fn=l[o].bind(l):s.a.logError("Unknown event handler for",e,o))})}),e.items&&e.items.forEach(e=>{e.controller||l.onViewConstructed(e)})}parseConfig(e){let t,o=this,n=e||o.view,a=n.domListeners;a&&(Array.isArray(a)||(a=[a]),a.forEach(e=>{Object.entries(e).forEach(([a,r])=>{t=null,"scope"!==a&&"delegate"!==a&&(Neo.isString(r)?t=r:Neo.isObject(r)&&r.hasOwnProperty("fn")&&Neo.isString(r.fn)&&(t=r.fn),t&&(o[t]?(console.log("#",a,o.id),console.log("parseConfig",t),e[a]=o[t].bind(o)):s.a.logError("Unknown domEvent handler for",n,t)))})})),n.listeners&&Object.entries(n.listeners).forEach(([e,a])=>{t=null,"scope"!==e&&"delegate"!==e&&(Neo.isString(a)?t=a:Neo.isObject(a)&&a.hasOwnProperty("fn")&&Neo.isString(a.fn)&&(t=a.fn),t&&(o[t]?n.listeners[e]=o[t].bind(o):s.a.logError("Unknown event handler for",n,t)))}),n.headers&&n.headers.forEach(e=>{e.controller||o.parseConfig(e)}),n.items&&n.items.forEach(e=>{e.controller||o.parseConfig(e)})}}Neo.applyClassConfig(g)},98:function(e,t,o){"use strict";o.r(t),o.d(t,"onStart",(function(){return V}));var n=o(3);class a extends n.a{static getConfig(){return{className:"RealWorld.view.FooterComponent",_vdom:{tag:"footer",cn:[{cls:["container"],cn:[{tag:"a",cls:["logo-font"],href:"#/",html:"conduit"},{tag:"span",cls:"attribution",html:'An interactive learning project from <a href="https://thinkster.io">Thinkster</a>. Code &amp; design licensed under MIT.'}]}]}}}}Neo.applyClassConfig(a);var r=o(0);class s extends n.a{static getConfig(){return{className:"RealWorld.view.HeaderComponent",activeItem_:"home",cls:["navbar","navbar-light"],loggedIn_:!1,userImage_:null,userName_:null,_vdom:{tag:"nav",cls:["navbar navbar-light"],cn:[{cls:["container"],cn:[{tag:"a",cls:["navbar-brand"],href:"#/",html:"conduit"},{tag:"ul",cls:["nav navbar-nav","pull-xs-right"],cn:[{tag:"li",cls:["nav-item"],cn:[{tag:"a",cls:["nav-link"],href:"#/",html:"Home"}]},{tag:"li",cls:["nav-item"],removeDom:!0,cn:[{tag:"a",cls:["nav-link"],href:"#/editor",cn:[{tag:"i",cls:"ion-compose"},{vtype:"text",html:"&nbsp;New Article"}]}]},{tag:"li",cls:["nav-item"],removeDom:!0,cn:[{tag:"a",cls:["nav-link"],href:"#/settings",cn:[{tag:"i",cls:"ion-gear-a"},{vtype:"text",html:"&nbsp;Settings"}]}]},{tag:"li",cls:["nav-item"],removeDom:!0,cn:[{tag:"a",cls:["nav-link"],href:"#/profile",cn:[{tag:"img",cls:["user-pic"]},{vtype:"text",html:"&nbsp;Profile"}]}]},{tag:"li",cls:["nav-item"],cn:[{tag:"a",cls:["nav-link"],href:"#/login",html:"Sign in"}]},{tag:"li",cls:["nav-item"],cn:[{tag:"a",cls:["nav-link"],href:"#/register",html:"Sign up"}]}]}]}]}}}afterSetActiveItem(e,t){let o=this,n=o.vdom;t&&r.a.remove(n.cn[0].cn[1].cn[o.getActiveIndex(t)].cn[0].cls,"active"),r.a.add(n.cn[0].cn[1].cn[o.getActiveIndex(e)].cn[0].cls,"active"),o.vdom=n}afterSetLoggedIn(e,t){if(Neo.isBoolean(t)){let t=this,o=t.vdom,n=o.cn[0].cn[1];n.cn[1].removeDom=!e,n.cn[2].removeDom=!e,n.cn[3].removeDom=!e,n.cn[4].removeDom=e,n.cn[5].removeDom=e,t.vdom=o}}afterSetUserImage(e,t){let o=this.vdom,n=o.cn[0].cn[1].cn[3].cn[0];n.cn[0].removeDom=!e,n.cn[0].src=e,this.vdom=o}afterSetUserName(e,t){if(e){let t=this,o=t.vdom,n=o.cn[0].cn[1].cn[3].cn[0];n.href="#/profile/"+e,n.cn[1].html="&nbsp;"+e,t.vdom=o}}getActiveIndex(e){switch(e){case"/settings":return 2;case"/login":return 4;case"/register":return 5}return e.includes("/editor")?1:e.includes("/profile")?3:0}}Neo.applyClassConfig(s);var l=o(4);class i extends n.a{static getConfig(){return{className:"RealWorld.view.article.PreviewComponent",author_:null,cls:["article-preview"],createdAt_:null,description_:null,favorited_:!1,favoritesCount_:null,slug_:null,tagList_:null,title_:null,userImage_:null,_vdom:{cn:[{cls:["article-meta"],cn:[{tag:"a",flag:"userImageLink",cn:[{tag:"img"}]},{cls:["info"],cn:[{tag:"a",cls:["author"],flag:"author"},{tag:"span",cls:["date"],flag:"createdAt"}]},{tag:"button",cls:["btn","btn-sm","pull-xs-right"],cn:[{tag:"i",cls:["ion-heart"]},{vtype:"text",flag:"favoritesCount"}]}]},{tag:"a",cls:["preview-link"],flag:"preview-link",cn:[{tag:"h1",flag:"title"},{tag:"p",flag:"description"},{tag:"span",html:"Read more..."}]}]}}}constructor(e){super(e);let t=this.domListeners;t.push({click:{fn:this.onFavoriteButtonClick,delegate:".pull-xs-right",scope:this}}),this.domListeners=t}afterSetAuthor(e,t){let o=this.vdom,n=l.a.getByFlag(o,"author"),a="#/profile/"+e;n.href=a,n.html=e,l.a.getByFlag(o,"userImageLink").href=a,this.vdom=o}afterSetCreatedAt(e,t){let o=this.vdom;l.a.getByFlag(o,"createdAt").html=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"long",year:"numeric"}).format(new Date(e)),this.vdom=o}afterSetDescription(e,t){let o=this.vdom;l.a.getByFlag(o,"description").html=e,this.vdom=o}afterSetFavorited(e,t){let o=this,n=o.vdom,a=n.cn[0].cn[2];r.a.add(a.cls,e?"btn-primary":"btn-outline-primary"),r.a.remove(a.cls,e?"btn-outline-primary":"btn-primary"),o.vdom=n,Neo.isBoolean(t)&&o.getController().favoriteArticle(o.slug,e)}afterSetFavoritesCount(e,t){let o=this.vdom;l.a.getByFlag(o,"favoritesCount").html=" "+e,this.vdom=o}afterSetSlug(e,t){let o=this.vdom;l.a.getByFlag(o,"preview-link").href="#/article/"+e,this.vdom=o}afterSetTagList(e,t){let o,n=this,a=n.vdom;a.cn[1].cn[3]&&a.cn[1].cn.pop(),Array.isArray(e)&&e.length>0&&(o={tag:"ul",cls:["tag-list"],cn:[]},e.forEach(e=>{o.cn.push({tag:"li",cls:["tag-default","tag-pill","tag-outline"],html:e})}),a.cn[1].cn.push(o),n.vdom=a)}afterSetTitle(e,t){let o=this.vdom;l.a.getByFlag(o,"title").html=e,this.vdom=o}afterSetUserImage(e,t){let o=this.vdom;l.a.getByFlag(o,"userImageLink").cn[0].src=e,this.vdom=o}onFavoriteButtonClick(e){let t=!this.favorited;this.set({favorited:t,favoritesCount:t?this.favoritesCount+1:this.favoritesCount-1})}}Neo.applyClassConfig(i);class c extends n.a{static getStaticConfig(){return{observable:!0}}static getConfig(){return{className:"RealWorld.view.article.TagListComponent",activeTag_:null,cls:["col-md-3"],tags_:[],_vdom:{cn:[{cls:["sidebar"],cn:[{tag:"p",html:"Popular Tags"},{cls:["tag-list"]}]}]}}}constructor(e){super(e),Neo.main.DomEvents.registerPreventDefaultTargets({name:"click",cls:"tag-pill"});let t=this.domListeners;t.push({click:{fn:this.onTagLinkClick,delegate:".tag-pill",scope:this}}),this.domListeners=t}afterSetActiveTag(e,t){void 0!==t&&this.fire("tagChange",{oldValue:t,value:e})}afterSetTags(e,t){let o=this,n=o.vdom;n.cn[0].cn[1].cn=[],Array.isArray(e)&&(e.forEach(e=>{n.cn[0].cn[1].cn.push({tag:"a",cls:["tag-pill","tag-default"],href:"",html:e,id:o.getTagVdomId(e)})}),o.vdom=n)}getTagId(e){return e.split("__")[1]}getTagVdomId(e){return this.id+"__"+e}onTagLinkClick(e){this.activeTag=this.getTagId(e.path[0].id)}}Neo.applyClassConfig(c);class g extends n.a{static getConfig(){return{className:"RealWorld.view.HomeComponent",activeTag:null,articlePreviews_:null,cls:["home-page"],countArticles_:10,currentPage_:1,feeds_:[{name:"Your Feed",disabled:!0},{name:"Global Feed",active:!0}],loggedIn_:!1,pageSize_:10,previewComponents:[],tagList_:null,_vdom:{cn:[{cls:["banner"],cn:[{cls:["container"],cn:[{tag:"h1",cls:["logo-font"],html:"conduit"},{tag:"p",html:"A place to share your knowledge."}]}]},{cls:["container","page"],cn:[{cls:["row"],cn:[{cls:["col-md-9"],cn:[{cls:["feed-toggle"],cn:[{tag:"ul",cls:["nav","nav-pills","outline-active"],flag:"feed-header",cn:[]}]},{tag:"nav",cn:[{tag:"ul",cls:["pagination"],flag:"pagination"}]}]}]}]}]}}}constructor(e){super(e),Neo.main.DomEvents.registerPreventDefaultTargets({name:"click",cls:"prevent-click"});let t=this,o=t.domListeners;o.push({click:{fn:t.onNavLinkClick,delegate:".nav-link",scope:t}},{click:{fn:t.onPageNavLinkClick,delegate:".page-link",scope:t}}),t.domListeners=o,t.getController().on({afterSetCurrentUser:t.onCurrentUserChange,scope:t})}onConstructed(){super.onConstructed();let e=this,t=e.vdom;e.tagList=Neo.create({module:c,parentId:e.id,listeners:{tagChange:e.onTagChange,scope:e}}),t.cn[1].cn[0].cn.push(e.tagList.vdom),e.vdom=t}afterSetArticlePreviews(e,t){let o,n=this,a=n.getContainer(),r=a.cn.pop(),s=n.vdom;a.cn=[a.cn.shift()],Array.isArray(e)&&e.forEach((e,t)=>{o={author:e.author.username,createdAt:e.createdAt,description:e.description,favorited:e.favorited,favoritesCount:e.favoritesCount,slug:e.slug,tagList:e.tagList,title:e.title,userImage:e.author.image},n.previewComponents[t]?n.previewComponents[t].set(o,!0):n.previewComponents[t]=Neo.create({module:i,parentId:n.id,...o}),a.cn.push(n.previewComponents[t].vdom)}),a.cn.push(r),n.vdom=s}afterSetCountArticles(e,t){let o,n=this,a=n.vdom,r=l.a.getByFlag(a,"pagination"),s=n.pageSize,i=Math.ceil(e/s),c=n.currentPage,g=1;if(i<2);else for(r.cn=[];g<=i;g++)o=["page-item"],g===c&&o.push("active"),r.cn.push({tag:"li",cls:o,cn:[{tag:"a",cls:["page-link","prevent-click"],id:n.getNavLinkVdomId(g),href:"",html:g}]});n.vdom=a}afterSetCurrentPage(e,t){let o,n,a=this,s=a.vdom;a.mounted&&(o=l.a.findVdomChild(s,a.getNavLinkVdomId(e)).parentNode,n=l.a.findVdomChild(s,a.getNavLinkVdomId(t)).parentNode,r.a.add(o.cls,"active"),r.a.remove(n.cls,"active"),a.vdom=s,a.getController()._articlesOffset=(e-1)*a.pageSize,a.getArticles(),Neo.main.DomAccess.windowScrollTo({}))}afterSetFeeds(e,t){let o,n=this,a=n.vdom,r=l.a.getByFlag(a,"feed-header");r.cn=[],e.forEach((e,t)=>{o=["prevent-click","nav-link"],e.active&&o.push("active"),e.disabled&&o.push("disabled"),r.cn.push({tag:"li",cls:["nav-item"],id:n.id+"__nav-item_"+t,cn:[{tag:"a",cls:o,href:"",html:e.name,id:n.id+"__nav-item-link_"+t}]})})}afterSetLoggedIn(e,t){let o=this.vdom,n=l.a.findVdomChild(o,this.id+"__nav-item-link_0").vdom;r.a[e?"remove":"add"](n.cls,"disabled"),this.vdom=o}afterSetPageSize(e,t){let o=0;for(console.log("afterSetPageSize",e);o<e;o++);}getArticleId(e){return this.id+"__"+e}getArticles(e={},t={}){let o=this;o.activeTag&&(e={tag:o.activeTag,...e}),o.getController().getArticles(e,t).then(e=>{o.set({articlePreviews:e.json.articles,countArticles:e.json.articlesCount})})}getContainer(){let e=l.a.findVdomChild(this.vdom,{cls:"col-md-9"});return e&&e.vdom}getNavLinkId(e){return parseInt(e.split("__")[1])}getNavLinkVdomId(e){return this.id+"__"+e}onNavLinkClick(e){let t=this,o=t.vdom,n=l.a.findVdomChild(o,e.path[0].id),a=l.a.getByFlag(o,"feed-header"),s={};if(!n.vdom.cls.includes("disabled")){switch(n.vdom.html){case"Global Feed":t.activeTag=null;break;case"Your Feed":t.activeTag=null,s={slug:"feed"};break;default:t.activeTag=n.vdom.html.substring(2)}a.cn.forEach(e=>{r.a[e.id===n.parentNode.id?"add":"remove"](e.cn[0].cls,"active")}),t._currentPage=1,t.vdom=o,t.getController()._articlesOffset=0,t.getArticles({},s)}}onCurrentUserChange(e){this.loggedIn=!!e}onPageNavLinkClick(e){this.currentPage=this.getNavLinkId(e.path[0].id)}onTagChange(e){let t=this,o=t.feeds,n="# "+e.value;o.forEach(e=>{e.active=!1}),o.length<3?o.push({active:!0,name:n}):Object.assign(o[2],{active:!0,name:n}),t.activeTag=e.value,t._currentPage=1,t.feeds=o,t.getController()._articlesOffset=0,t.getArticles({tag:e.value})}}Neo.applyClassConfig(g);class m extends n.a{static getConfig(){return{className:"RealWorld.view.article.CommentComponent",author_:null,body_:null,cls:["card"],commentId:null,createdAt_:null,updatedAt:null,_vdom:{cn:[{cls:["card-block"],cn:[{tag:"p",cls:["card-text"]}]},{cls:["card-footer"],cn:[{tag:"a",cls:["comment-author"],href:"",cn:[{tag:"img",cls:["comment-author-img"]}]},{vtype:"text",html:"&nbsp;"},{tag:"a",cls:["comment-author"],href:""},{tag:"span",cls:["date-posted"]},{tag:"span",cls:["mod-options"],flag:"mod-options",cn:[{tag:"i",cls:["ion-trash-a"]}]}]}]}}}constructor(e){super(e);let t=this,o=t.domListeners;o.push({click:{fn:t.onDeleteButtonClick,delegate:".ion-trash-a",scope:t}}),t.domListeners=o,t.getController().on({afterSetCurrentUser:t.onCurrentUserChange,scope:t})}afterSetAuthor(e,t){if(e){let t=this,o=t.vdom;o.cn[1].cn[0].cn[0].src=e.image,o.cn[1].cn[2].html=e.username,t.vdom=o,t.onCurrentUserChange()}}afterSetBody(e,t){if(e){let t=this.vdom;t.cn[0].cn[0].html=e,this.vdom=t}}afterSetCreatedAt(e,t){if(e){let t=this.vdom;t.cn[1].cn[3].html=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"long",year:"numeric"}).format(new Date(e)),this.vdom=t}}onCurrentUserChange(){let e=this,t=e.getController().currentUser,o=e.vdom;t&&(l.a.getByFlag(o,"mod-options").removeDom=e.author.username!==t.username,e.vdom=o)}onDeleteButtonClick(e){this.getController().deleteComment(this.commentId)}onEditButtonClick(e){console.log("onEditButtonClick")}}Neo.applyClassConfig(m);class d extends n.a{static getConfig(){return{className:"RealWorld.view.article.CreateCommentComponent",cls:["card","comment-form"],userImage_:null,userName_:null,_vdom:{tag:"form",cn:[{cls:["card-block"],cn:[{tag:"textarea",cls:["form-control"],placeholder:"Write a comment...",rows:3}]},{cls:["card-footer"],cn:[{tag:"img",cls:["comment-author-img"],src:"https://static.productionready.io/images/smiley-cyrus.jpg"},{vtype:"text",html:"&nbsp;"},{tag:"span",cls:["comment-author"]},{tag:"button",cls:["btn","btn-sm","btn-primary"],html:"Post Comment",type:"button"}]}]}}}constructor(e){super(e);let t=this,o=t.domListeners,n=t.vdom;o.push({click:{fn:t.onSubmitButtonClick,delegate:".btn-primary",scope:t}}),t.domListeners=o,n.cn[0].cn[0].id=t.getInputElId(),t.vdom=n,t.getController().on({afterSetCurrentUser:t.onCurrentUserChange,scope:t})}afterSetUserImage(e,t){if(e){let t=this.vdom;t.cn[1].cn[0].src=e,this.vdom=t}}afterSetUserName(e,t){if(e){let t=this.vdom;t.cn[1].cn[2].html=e,this.vdom=t}}getInputElId(){return this.id+"__input"}onCurrentUserChange(e){this.set({userImage:e.image,userName:e.username})}onSubmitButtonClick(e){let t=this;Neo.main.DomAccess.getAttributes({id:t.getInputElId(),attributes:"value"}).then(e=>{t.getController().postComment({data:JSON.stringify({comment:{body:e.value}})}).then(e=>{let o=t.vdom;o.cn[0].cn[0].value="",t.vdom=o})})}}Neo.applyClassConfig(d);class u extends n.a{static getConfig(){return{className:"RealWorld.view.article.Component",author_:null,body_:null,commentComponents:[],comments_:null,createCommentComponent:null,createdAt_:null,cls:["article-page"],favorited_:!1,favoritesCount_:null,tagList_:null,title_:null,_vdom:{cn:[{cls:["banner"],cn:[{cls:["container"],cn:[{tag:"h1",flag:"title"},{cls:["article-meta"],cn:[{tag:"a",flag:"userimage",cn:[{tag:"img"}]},{cls:["info"],cn:[{tag:"a",cls:["author"],flag:"username"},{tag:"span",cls:["date"],flag:"createdAt"}]},{tag:"button",cls:["btn","btn-sm","btn-outline-secondary","follow-button"],cn:[{tag:"i",flag:"followIcon"},{vtype:"text",flag:"followAuthor"},{vtype:"text",flag:"username"}]},{tag:"button",cls:["btn","btn-sm","btn-outline-secondary","edit-button"],flag:"edit-button",removeDom:!0,cn:[{tag:"i",cls:["ion-edit"]},{vtype:"text",html:" Edit Article"}]},{vtype:"text",html:"&nbsp;&nbsp;"},{tag:"button",cls:["btn","btn-sm","btn-outline-primary","favorite-button"],flag:"favorited",cn:[{tag:"i",cls:["ion-heart"]},{vtype:"text",html:"&nbsp;"},{vtype:"text"},{vtype:"text",html:" Post "},{tag:"span",cls:["counter"],flag:"favoritesCount"}]},{tag:"button",cls:["btn","btn-sm","btn-outline-danger","delete-button"],flag:"delete-button",removeDom:!0,cn:[{tag:"i",cls:["ion-trash-a"]},{vtype:"text",html:" Delete Article"}]}]}]}]},{cls:["container","page"],cn:[{cls:["row","article-content"],cn:[{cls:["col-md-12"],flag:"body",cn:[]}]},{tag:"hr"},{cls:["article-actions"],flag:"article-actions",cn:[{cls:["article-meta"],cn:[{tag:"a",flag:"userimage",cn:[{tag:"img"}]},{cls:["info"],cn:[{tag:"a",cls:["author"],flag:"username"},{tag:"span",cls:["date"],html:"January 20th"}]},{tag:"button",cls:["btn","btn-sm","btn-outline-secondary","follow-button"],cn:[{tag:"i",flag:"followIcon"},{vtype:"text",flag:"followAuthor"},{vtype:"text",flag:"username"}]},{vtype:"text",html:"&nbsp;&nbsp;"},{tag:"button",cls:["btn","btn-sm","btn-outline-primary","favorite-button"],flag:"favorited",cn:[{tag:"i",cls:["ion-heart"]},{vtype:"text",html:"&nbsp;"},{vtype:"text"},{vtype:"text",html:" Post "},{tag:"span",cls:["counter"],flag:"favoritesCount"}]}]}]},{cls:"row",cn:[{cls:["col-xs-12","col-md-8","offset-md-2"],flag:"comments-section",cn:[]}]}]}]}}}constructor(e){super(e);let t=this,o=t.domListeners;o.push({click:{fn:t.onDeleteButtonClick,delegate:".delete-button",scope:t}},{click:{fn:t.onEditButtonClick,delegate:".edit-button",scope:t}},{click:{fn:t.onFavoriteButtonClick,delegate:".favorite-button",scope:t}},{click:{fn:t.onFollowButtonClick,delegate:".follow-button",scope:t}}),t.domListeners=o,t.getController().on({afterSetCurrentUser:t.onCurrentUserChange,scope:t})}onConstructed(){let e=this,t=e.getController().currentUser,o=e.vdom;e.createCommentComponent=Neo.create({module:d,parentId:e.id,userImage:t&&t.image||null}),l.a.getByFlag(o,"comments-section").cn.unshift(e.createCommentComponent.vdom),e.vdom=o,super.onConstructed()}afterSetAuthor(e,t){if(e){let t=this,o=t.vdom;l.a.getFlags(o,"followAuthor").forEach(t=>{t.html=e.following?" Unfollow ":" Follow "}),l.a.getFlags(o,"followIcon").forEach(t=>{t.cls=e.following?["ion-minus-round"]:["ion-plus-round"]}),l.a.getFlags(o,"userimage").forEach(t=>{t.href="#/profile/"+e.username,t.cn[0].src=e.image}),l.a.getFlags(o,"username").forEach(t=>{t.href="#/profile/"+e.username,t.html=e.username}),t.vdom=o,t.onCurrentUserChange()}}afterSetBody(e,t){const o=this;e&&Neo.main.addon.Markdown.markdownToHtml(e).then(e=>{let t=o.vdom;l.a.getByFlag(t,"body").cn[0]={cn:[{tag:"p",html:e}]},o.vdom=t})}afterSetComments(e,t){if(Array.isArray(e)){let t,o=this,n=o.vdom,a=l.a.getByFlag(n,"comments-section");a.cn=[a.cn.shift()],e.forEach((e,n)=>{t={author:e.author,body:e.body,commentId:e.id,createdAt:e.createdAt,updatedAt:e.updatedAt},o.commentComponents[n]?o.commentComponents[n].set(t,!0):o.commentComponents[n]=Neo.create({module:m,parentId:o.id,...t}),a.cn.push(o.commentComponents[n].vdom)}),o.vdom=n}}afterSetCreatedAt(e,t){if(e){let t=this.vdom;l.a.getByFlag(t,"createdAt").html=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"long",year:"numeric"}).format(new Date(e)),this.vdom=t}}afterSetFavorited(e,t){let o=this,n=o.vdom;l.a.getFlags(n,"favorited").forEach(t=>{t.cn[2].html=e?"Unfavorite":"Favorite",r.a.add(t.cls,e?"btn-primary":"btn-outline-primary"),r.a.remove(t.cls,e?"btn-outline-primary":"btn-primary")}),o.vdom=n,Neo.isBoolean(t)&&o.getController().favoriteArticle(o.slug,e).then(e=>{o.favoritesCount=e.json.article.favoritesCount})}afterSetFavoritesCount(e,t){if(Neo.isNumber(e)){let t=this.vdom;l.a.getFlags(t,"favoritesCount").forEach(t=>{t.html=`(${e})`}),this.vdom=t}}afterSetTagList(e,t){let o,n=this.vdom,a=l.a.getByFlag(n,"body");Array.isArray(e)&&e.length>0?(o={tag:"ul",cls:["tag-list"],cn:[]},e.forEach(e=>{o.cn.push({tag:"li",cls:["tag-default","tag-pill","tag-outline"],html:e})}),a.cn[1]=o):a.cn[1]&&(a.cn[1].removeDom=!0),this.vdom=n}afterSetTitle(e,t){let o=this.vdom;l.a.getByFlag(o,"title").html=e,this.vdom=o}onCurrentUserChange(){console.log("### onCurrentUserChange");let e,t=this,o=t.getController().currentUser,n=t.vdom;t.author&&o&&(e=t.author.username===o.username,n.cn[0].cn[0].cn[1].cn[2].removeDom=e,n.cn[0].cn[0].cn[1].cn[5].removeDom=e,l.a.getByFlag(n,"article-actions").removeDom=e,l.a.getByFlag(n,"delete-button").removeDom=!e,l.a.getByFlag(n,"edit-button").removeDom=!e,t.vdom=n)}onDeleteButtonClick(e){this.getController().deleteArticle(this.slug)}onEditButtonClick(e){Neo.Main.setRoute({value:"/editor/"+this.slug})}onFavoriteButtonClick(e){this.favorited=!this.favorited}onFollowButtonClick(e){let t=this;t.getController().followUser(t.author.username,!t.author.following).then(e=>{t.author=e.json.profile})}}Neo.applyClassConfig(u);const p="https://conduit.productionready.io/api";var h=o(1);class f extends h.a{static getStaticConfig(){return{observable:!0,token:null}}static getConfig(){return{className:"RealWorld.api.Base",defaultHeaders:null,isReady:!1,resource:"/"}}onConstructed(){super.onConstructed(),this.onAfterConstructed()}onAfterConstructed(){const e=this;Neo.apps&&Neo.apps.RealWorld?Neo.apps.RealWorld.rendered?e.onAppRendered():Neo.apps.RealWorld.on("render",e.onAppRendered,e):setTimeout(()=>{e.onAfterConstructed()},200)}onAppRendered(){const e=this;f.token?e.onReady(f.token):f.initialTokenRequestSent?f.on({ready:e.onReady,scope:e}):(f.initialTokenRequestSent=!0,Neo.main.addon.LocalStorage.readLocalStorageItem({key:"neoRealWorldToken"}).then(t=>{const o=t.value;o&&(f.token=o),e.onReady(o),f.isReady=!0,f.fire("ready",o)}))}createUrl(e){return e.url?p+e.url:p+(e.resource||this.resource)+(e.slug?"/"+e.slug:"")}delete(e={}){return Neo.Xhr.promiseJson({data:e.data,method:"DELETE",params:e.params,url:this.createUrl(e),headers:{...this.defaultHeaders||{},"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).catch(e=>{console.log("RealWorld.api.Base:get()",e)})}get(e={}){return Neo.Xhr.promiseJson({data:e.data,method:"GET",params:e.params,url:this.createUrl(e),headers:{...this.defaultHeaders||{},"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).catch(e=>{console.log("RealWorld.api.Base:get()",e)})}onReady(e){let t=this;e&&(t.defaultHeaders=t.defaultHeaders||{},t.defaultHeaders.Authorization="Token "+e),t.isReady=!0,t.fire("ready",e)}post(e={}){const t=e.params;return delete e.params,Neo.Xhr.promiseJson({data:e.data,method:"POST",params:t,url:this.createUrl(e),headers:{...this.defaultHeaders||{},"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).catch(e=>{console.log("RealWorld.api.Base:post()",e)})}put(e={}){const t=e.params;return delete e.params,Neo.Xhr.promiseJson({data:e.data,method:"PUT",params:t,url:this.createUrl(e),headers:{...this.defaultHeaders||{},"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).catch(e=>{console.log("RealWorld.api.Base:put()",e)})}}f.initialTokenRequestSent=!1,f.token=null,Neo.applyClassConfig(f);class v extends f{static getConfig(){return{className:"RealWorld.api.Article",resource:"/articles"}}deleteComment(e,t){return this.delete({url:`/articles/${e}/comments/${t}`})}getComments(e){return this.get({url:`/articles/${e}/comments`})}postComment(e,t){return this.post({...t,url:`/articles/${e}/comments`})}}Neo.applyClassConfig(v);let C=Neo.create(v);Neo.applyToGlobalNs(C);var y=C,b=o(38),N=o(6);class w extends n.a{static getConfig(){return{className:"RealWorld.view.article.CreateComponent",body_:"",cls:["editor-page"],errors_:[],description_:"",slug:null,tagList_:[],title_:"",_vdom:{cn:[{cls:["container","page"],cn:[{cls:["row"],cn:[{cls:["col-md-10","offset-md-1","col-xs-12"],cn:[{tag:"ul",flag:"errors",cls:["error-messages"]},{tag:"form",cn:[{tag:"fieldset",cn:[{tag:"fieldset",cls:["form-group"],cn:[{tag:"input",cls:["form-control","form-control-lg"],name:"title",flag:"title",placeholder:"Article Title",type:"text"}]},{tag:"fieldset",cls:["form-group"],cn:[{tag:"input",cls:["form-control"],name:"description",flag:"description",placeholder:"What's this article about?",type:"text"}]},{tag:"fieldset",cls:["form-group"],cn:[{tag:"textarea",cls:["form-control"],name:"body",flag:"body",placeholder:"Write your article (in markdown)",rows:8}]},{tag:"fieldset",cls:["form-group"],cn:[{tag:"input",cls:["form-control","field-tags"],name:"tags",flag:"tags",placeholder:"Enter tags",type:"text"},{cls:["tag-list"],flag:"tag-list"}]},{tag:"button",cls:["btn","btn-lg","btn-primary","pull-xs-right"],html:"Publish Article",type:"button"}]}]}]}]}]}]}}}constructor(e){super(e);let t=this,o=t.domListeners;o.push({click:{fn:t.onSubmitButtonClick,delegate:".btn-primary",scope:t}},{click:{fn:t.onTagClose,delegate:".ion-close-round",scope:t}},{keydown:{fn:t.onFieldTagsKeyDown,delegate:".field-tags",scope:t}}),t.domListeners=o}afterSetBody(e,t){let o=this.vdom;l.a.getByFlag(o,"body").value=e,this.vdom=o}afterSetDescription(e,t){let o=this.vdom;l.a.getByFlag(o,"description").value=e,this.vdom=o}afterSetErrors(e,t){let o=this.vdom,n=l.a.getByFlag(o,"errors");n.cn=[],Object.entries(e||{}).forEach(([e,t])=>{n.cn.push({tag:"li",html:e+" "+t.join(" and ")})}),this.vdom=o}afterSetTagList(e,t){let o=this.vdom,n=l.a.getByFlag(o,"tag-list"),a=l.a.getByFlag(o,"tags");n.cn=[],a.value=null,Object.entries(e||{}).forEach(([e,t])=>{n.cn.push({tag:"span",cls:["tag-default tag-pill"],cn:[{tag:"i",cls:["ion-close-round"],"data-value":t},{vtype:"text",html:t}]})}),this.vdom=o}afterSetTitle(e,t){let o=this.vdom;l.a.getByFlag(o,"title").value=e,this.vdom=o}onFieldTagsKeyDown(e){const t=this;"Enter"===e.key&&Neo.main.DomAccess.getAttributes({id:e.target.id,attributes:"value"}).then(e=>{N.a.findChildVnode(t.vnode,{className:"field-tags"}).vnode.attributes.value=e.value,t.tagList=[...t._tagList,e.value]})}onSubmitButtonClick(){let e=this,t=e.vdom,o=l.a.getByFlag(t,"body"),n=l.a.getByFlag(t,"description"),a=[l.a.getByFlag(t,"title").id,n.id,o.id];Neo.main.DomAccess.getAttributes({id:a,attributes:"value"}).then(t=>{y[e.slug?"put":"post"]({data:JSON.stringify({article:{title:t[0].value,description:t[1].value,body:t[2].value,tagList:e.tagList}}),slug:e.slug}).then(t=>{const o=t.json.errors;o?e.errors=o:Neo.Main.setRoute({value:"/article/"+t.json.article.slug})})})}onTagClose(e){this.tagList=this.tagList.filter(t=>t!==e.target.data.value)}resetForm(){this.set({body:"",description:"",slug:null,tagList:[],title:""})}}Neo.applyClassConfig(w);class k extends f{static getConfig(){return{className:"RealWorld.api.Favorite"}}add(e){return this.post({url:`/articles/${e}/favorite`})}remove(e){return this.delete({url:`/articles/${e}/favorite`})}}Neo.applyClassConfig(k);let S=Neo.create(k);Neo.applyToGlobalNs(S);var A=S;class _ extends f{static getConfig(){return{className:"RealWorld.api.Profile",resource:"/profiles"}}follow(e){return this.post({url:`/profiles/${e}/follow`})}unfollow(e){return this.delete({url:`/profiles/${e}/follow`})}}Neo.applyClassConfig(_);let B=Neo.create(_);Neo.applyToGlobalNs(B);var F=B;class L extends n.a{static getConfig(){return{className:"RealWorld.view.user.ProfileComponent",articlePreviews_:null,bio_:null,cls:["profile-page"],countArticles_:5,following_:null,image_:null,myProfile_:!1,previewComponents:[],username_:null,_vdom:{cn:[{cls:["user-info"],cn:[{cls:["container"],cn:[{cls:["row"],cn:[{cls:["col-xs-12","col-md-10","offset-md-1"],cn:[{tag:"img",cls:["user-img"],flag:"image"},{tag:"h4",flag:"username"},{tag:"p",flag:"bio"},{tag:"button",cls:["btn","btn-sm","btn-outline-secondary","action-btn","follow-button"],flag:"following",cn:[{tag:"i",cls:["ion-plus-round"]},{vtype:"text"},{vtype:"text"}]},{tag:"a",cls:["btn","btn-sm","btn-outline-secondary","action-btn"],flag:"edit-profile",href:"#/settings",removeDom:!0,cn:[{tag:"i",cls:["ion-gear-a"]},{vtype:"text",html:" Edit Profile Settings"}]}]}]}]}]},{cls:["container"],cn:[{cls:["row"],cn:[{cls:["col-xs-12","col-md-10","offset-md-1"],flag:"feed-container",cn:[{cls:["articles-toggle"],cn:[{tag:"ul",cls:["nav","nav-pills","outline-active"],flag:"feed-header",cn:[{tag:"li",cls:["nav-item"],cn:[{tag:"a",cls:["nav-link","prevent-click","active"],href:"",html:"My Articles"}]},{tag:"li",cls:["nav-item"],cn:[{tag:"a",cls:["nav-link","prevent-click"],href:"",html:"Favorited Articles"}]}]}]}]}]}]}]}}}constructor(e){super(e),Neo.main.DomEvents.registerPreventDefaultTargets({name:"click",cls:"prevent-click"});let t=this,o=t.domListeners;o.push({click:{fn:t.onFollowButtonClick,delegate:".follow-button",scope:t}},{click:{fn:t.onNavLinkClick,delegate:".nav-link",scope:t}}),t.domListeners=o,t.getController().on({afterSetCurrentUser:t.onCurrentUserChange,scope:t})}afterSetArticlePreviews(e,t){let o,n=this,a=n.vdom,r=l.a.getByFlag(a,"feed-container");r.cn=[r.cn.shift()],Array.isArray(e)&&e.forEach((e,t)=>{o={author:e.author.username,createdAt:e.createdAt,description:e.description,favorited:e.favorited,favoritesCount:e.favoritesCount,slug:e.slug,tagList:e.tagList,title:e.title,userImage:e.author.image},n.previewComponents[t]?n.previewComponents[t].set(o,!0):n.previewComponents[t]=Neo.create({module:i,parentId:n.id,...o}),r.cn.push(n.previewComponents[t].vdom)}),n.vdom=a}afterSetBio(e,t){if(e){let t=this.vdom;l.a.getByFlag(t,"bio").html=e,this.vdom=t}}afterSetFollowing(e,t){if(Neo.isBoolean(e)){let t=this.vdom,o=l.a.getByFlag(t,"following");r.a.remove(o.cls,e?"btn-outline-secondary":"btn-secondary"),r.a.add(o.cls,e?"btn-secondary":"btn-outline-secondary"),o.cn[0].cls=[e?"ion-minus-round":"ion-plus-round"],o.cn[1].html=e?" Unfollow ":" Follow ",this.vdom=t}}afterSetImage(e,t){let o=this.vdom;l.a.getByFlag(o,"image").src=e,this.vdom=o}afterSetMyProfile(e,t){if(console.log("afterSetMyProfile",e),Neo.isBoolean(t)){let t=this.vdom;l.a.getByFlag(t,"edit-profile").removeDom=!e,l.a.getByFlag(t,"following").removeDom=e,this.vdom=t}}afterSetUsername(e,t){let o=this.vdom;l.a.getByFlag(o,"following").cn[2].html=e,l.a.getByFlag(o,"username").html=e,this.vdom=o}getArticles(e){this.getController().getArticles(e).then(e=>{this.articlePreviews=e.json.articles})}onCurrentUserChange(e){console.log("onCurrentUserChange",e),this.myProfile=this.username===e&&e.username}onFollowButtonClick(e){let t=this;t.getController().followUser(t.username,!t.following).then(e=>{t.following=e.json.profile.following})}onNavLinkClick(e){let t=this,o=t.vdom,n=l.a.findVdomChild(o,e.path[0].id),a=l.a.getByFlag(o,"feed-header"),s={};if(!n.vdom.cls.includes("disabled")){switch(n.vdom.html){case"Favorited Articles":s={favorited:t.username};break;case"My Articles":s={author:t.username}}a.cn.forEach(e=>{r.a[e.id===n.parentNode.id?"add":"remove"](e.cn[0].cls,"active")}),t.vdom=o,t.getArticles({...s,limit:t.countArticles,offset:0})}}update(e){let t=this,o=e.username;t.set({bio:e.bio,following:e.following,image:e.image,myProfile:e.myProfile,username:o}).then(()=>{t.getArticles({author:o,limit:t.countArticles,offset:0})})}}Neo.applyClassConfig(L);class x extends n.a{static getConfig(){return{className:"RealWorld.view.user.SettingsComponent",bio_:null,cls:["settings-page"],email_:null,errors_:[],image_:null,userName_:null,_vdom:{cn:[{cls:["container","page"],cn:[{cls:["row"],cn:[{cls:["col-md-6","offset-md-3","col-xs-12"],cn:[{tag:"h1",cls:["text-xs-center"],html:"Your Settings"},{tag:"ul",cls:["error-messages"],flag:"errors",removeDom:!0},{tag:"form",cn:[{tag:"fieldset",cn:[{tag:"fieldset",cls:["form-group"],cn:[{tag:"input",cls:["form-control"],flag:"image",placeholder:"URL of profile picture",type:"text"}]},{tag:"fieldset",cls:["form-group"],cn:[{tag:"input",cls:["form-control","form-control-lg"],flag:"userName",placeholder:"Your Name",type:"text"}]},{tag:"fieldset",cls:["form-group"],cn:[{tag:"textarea",cls:["form-control","form-control-lg"],flag:"bio",placeholder:"Short bio about you",rows:8}]},{tag:"fieldset",cls:["form-group"],cn:[{tag:"input",cls:["form-control","form-control-lg"],flag:"email",placeholder:"Email",type:"text"}]},{tag:"fieldset",cls:["form-group"],cn:[{tag:"input",cls:["form-control","form-control-lg"],flag:"password",placeholder:"Password",type:"password"}]},{tag:"button",cls:["btn","btn-lg","btn-primary","pull-xs-right"],html:"Update Settings"}]}]},{tag:"hr"},{tag:"button",cls:["btn","btn-outline-danger"],html:"Or click here to logout."}]}]}]}]}}}constructor(e){super(e);let t=this,o=t.domListeners;o.push({click:{fn:t.onLogoutButtonClick,delegate:".btn-outline-danger",scope:t}},{click:{fn:t.onSubmitButtonClick,delegate:".btn-primary",scope:t}}),t.domListeners=o,t.getController().on({afterSetCurrentUser:t.onCurrentUserChange,scope:t})}afterSetBio(e,t){let o=this.vdom;l.a.getByFlag(o,"bio").value=e,this.vdom=o}afterSetEmail(e,t){let o=this.vdom;l.a.getByFlag(o,"email").value=e,this.vdom=o}afterSetErrors(e=[],t){let o=this.vdom,n=l.a.getByFlag(o,"errors");n.cn=[],n.removeDom=0===e.length,Object.entries(e).forEach(([e,t])=>{n.cn.push({tag:"li",html:e+" "+t.join(" and ")})}),this.vdom=o}afterSetImage(e,t){let o=this.vdom;l.a.getByFlag(o,"image").value=e,this.vdom=o}afterSetUserName(e,t){let o=this.vdom;l.a.getByFlag(o,"userName").value=e,this.vdom=o}onCurrentUserChange(e){e&&this.set({bio:e.bio,email:e.email,errors:[],image:e.image,userName:e.username})}onLogoutButtonClick(e){this.getController().logout()}onSubmitButtonClick(e){let t=this,o=t.vdom,n=l.a.getByFlag(o,"bio"),a=l.a.getByFlag(o,"email"),r=l.a.getByFlag(o,"image"),s=l.a.getByFlag(o,"password"),i=l.a.getByFlag(o,"userName");Neo.main.DomAccess.getAttributes({id:[n.id,a.id,r.id,s.id,i.id],attributes:"value"}).then(e=>{t.getController().updateSettings({data:JSON.stringify({user:{bio:e[0].value,email:e[1].value,image:e[2].value,password:e[3].value,username:e[4].value}})}).then(e=>{const o=e.json.errors;o?t.errors=o:Neo.Main.setRoute({value:"/profile/"+e.json.user.username})})})}}Neo.applyClassConfig(x);class I extends n.a{static getConfig(){return{className:"RealWorld.view.user.SignUpComponent",cls:["auth-page"],errors_:[],fieldsets_:[{name:"username",placeholder:"Your Name",type:"text"},{name:"email",placeholder:"Email",type:"text"},{name:"password",placeholder:"Password",type:"password"}],keys:{Enter:"onKeyDownEnter"},mode_:"signup",_vdom:{cn:[{cls:["container","page"],cn:[{cls:["row"],cn:[{cls:["col-md-6","offset-md-3","col-xs-12"],cn:[{tag:"h1",cls:["text-xs-center"]},{tag:"p",cls:["text-xs-center"],cn:[{tag:"a"}]},{tag:"ul",cls:["error-messages"]},{tag:"form",cn:[{tag:"fieldset",cn:[{tag:"button",cls:["btn","btn-lg","btn-primary","pull-xs-right"],type:"button"}]}]}]}]}]}]}}}constructor(e){super(e);let t=this.domListeners;t.push({click:{fn:this.onSubmitButtonClick,delegate:".btn-primary",scope:this}}),this.domListeners=t}afterSetErrors(e,t){let o=this.getErrorMessagesList(),n=this.vdom;o.cn=[],Object.entries(e||{}).forEach(([e,t])=>{o.cn.push({tag:"li",html:e+" "+t.join(" and ")})}),this.vdom=n}afterSetFieldsets(e,t){let o=this,n=o.vdom,a=n.cn[0].cn[0].cn[0].cn[3];e.slice().reverse().forEach(e=>{a.cn[0].cn.unshift({tag:"fieldset",cls:["form-group"],cn:[{tag:"input",cls:["form-control","form-control-lg"],id:o.getInputId(e.name),name:e.name,placeholder:e.placeholder,type:e.type}]})}),o.vdom=n}afterSetMode(e,t){let o="signup"===e,n=this.vdom,a=n.cn[0].cn[0].cn[0];a.cn[0].html=o?"Sign up":"Sign in",a.cn[1].cn[0].href=o?"#/login":"#/register",a.cn[1].cn[0].html=o?"Have an account?":"Need an account?",a.cn[3].cn[0].cn[0].removeDom=!o,a.cn[3].cn[0].cn[3].html=o?"Sign up":"Sign in",this.vdom=n}getErrorMessagesList(){let e=l.a.findVdomChild(this.vdom,{cls:"error-messages"});return e&&e.vdom}getInputId(e){return this.id+"__"+e}onKeyDownEnter(){this.onSubmitButtonClick()}onSubmitButtonClick(){let e,t=this,o=t.getController(),n="signup"===t.mode,a=[t.getInputId("email"),t.getInputId("password")];n&&a.push(t.getInputId("username")),Neo.main.DomAccess.getAttributes({id:a,attributes:"value"}).then(a=>{e={user:{email:a[0].value,password:a[1].value}},n&&(e.user.username=a[2].value),o.saveUser({data:JSON.stringify(e),slug:n?"":"/login"}).then(e=>{const n=e.json.errors;n?t.errors=n:o.login(e.json.user)})})}}Neo.applyClassConfig(I);class U extends f{static getConfig(){return{className:"RealWorld.api.Tag",resource:"/tags"}}}Neo.applyClassConfig(U);let T=Neo.create(U);Neo.applyToGlobalNs(T);var E=T;class R extends f{static getConfig(){return{className:"RealWorld.api.User",resource:"/users"}}}Neo.applyClassConfig(R);let P=Neo.create(R);Neo.applyToGlobalNs(P);var D=P;class j extends b.a{static getConfig(){return{className:"RealWorld.view.MainContainerController",articleComponent:null,articlesOffset_:0,createComponent:null,currentUser_:null,hashString:null,homeComponent:null,profileComponent:null,settingsComponent:null,signUpComponent:null}}onConstructed(){super.onConstructed();const e=this;D.on("ready",e.getCurrentUser,e),Neo.config.hash||e.onHashChange({appName:"RealWorld",hash:{"/":""},hashString:"/"},null)}afterSetArticlesOffset(e,t){Neo.isNumber(t)&&this.getArticles()}afterSetCurrentUser(e,t){"object"==typeof t&&this.getReference("header").set({loggedIn:!!e,userImage:e?e.image:null,userName:e?e.username:null}).then(()=>{setTimeout(()=>{this.fire("afterSetCurrentUser",e)},200)})}deleteArticle(e){y.delete({slug:e}).then(e=>{Neo.Main.setRoute({value:"/"})})}deleteComment(e){let t=this,o=t.hashString.split("/").pop();return y.deleteComment(o,e).then(e=>{t.getComments(o)})}favoriteArticle(e,t){return A[t?"add":"remove"](e)}followUser(e,t){return F[t?"follow":"unfollow"](e)}getArticle(e){return y.get({slug:e})}getArticles(e={},t={}){return y.get({params:{limit:10,offset:this.articlesOffset,...e},...t})}getComments(e){y.getComments(e).then(e=>{this.articleComponent.comments=e.json.comments})}getCurrentUser(e){e&&D.get({resource:"/user"}).then(e=>{this.currentUser=e.json.user})}getProfile(e){const t=this;F.get({slug:e}).then(e=>{t.profileComponent.update({...e.json.profile,myProfile:e.json.profile.username===(t.currentUser&&t.currentUser.username)})})}getTags(){E.get().then(e=>{this.homeComponent.tagList.tags=e.json.tags})}getView(e,t,o){const n=this;return n[e]||(n[e]=Neo.create({module:t,parentId:n.view.id,reference:o})),n[e]}login(e){this.currentUser=e,Neo.main.addon.LocalStorage.createLocalStorageItem({key:"neoRealWorldToken",value:e.token}).then(()=>{setTimeout(()=>{Neo.Main.setRoute({value:"/"})},50)})}logout(){this.currentUser=null,Neo.main.addon.LocalStorage.destroyLocalStorageItem({key:"neoRealWorldToken"}).then(()=>{setTimeout(()=>{Neo.Main.setRoute({value:"/"})},50)})}onHashChange(e,t){let o,n,a=this,r=e.hash,s=e.hashString,l=a.view;if(l.mounted)switch(console.log("onHashChange",e,t),a.hashString=s,l.items[0].activeItem=Object.keys(r)[0],"/"===s?o=a.getView("homeComponent",g,"home"):s.includes("/article/")?o=a.getView("articleComponent",u,"article"):s.includes("/editor")?o=a.getView("createComponent",w,"editor"):s.includes("/profile/")?o=a.getView("profileComponent",L,"profile"):r.hasOwnProperty("/login")?(o=a.getView("signUpComponent",I,"signup"),o.mode="signin"):r.hasOwnProperty("/register")?(o=a.getView("signUpComponent",I,"signup"),o.mode="signup"):r.hasOwnProperty("/settings")&&(o=a.getView("settingsComponent",x,"settings")),t&&t.hash&&(t.hash.hasOwnProperty("/login")&&r.hasOwnProperty("/register")||t.hash.hasOwnProperty("/register")&&r.hasOwnProperty("/login"))||(l.items.length>2&&l.removeAt(1,!1,!0),o&&l.insert(1,o)),o.reference){case"article":n=s.split("/").pop(),a.getArticle(n).then(e=>{let t=e.json.article,o=t.body;delete t.body,a.articleComponent.set(t).then(()=>{a.articleComponent.body=o})}),a.getComments(n);break;case"editor":n=s.split("/").pop(),"editor"!==n?a.getArticle(n).then(e=>{const t=e.json.article;a.createComponent.set({body:t.body,description:t.description,slug:t.slug,tagList:t.tagList,title:t.title})}):a.createComponent.resetForm();break;case"home":a.homeComponent.loggedIn=!!a.currentUser,a.homeComponent.getArticles(),a.getTags();break;case"profile":a.getProfile(s.split("/").pop());break;case"settings":a.currentUser&&setTimeout(()=>{a.settingsComponent.onCurrentUserChange(a.currentUser)},50);break;case"signup":o.errors=[]}else l.on("mounted",()=>{a.onHashChange(e,t)})}postComment(e={}){let t=this,o=t.hashString.split("/").pop();return y.postComment(o,e).then(e=>{t.getComments(o)})}saveUser(e){return D.post(e)}updateSettings(e={}){return D.put({...e,resource:"/user"}).then(e=>(e.json.errors||(this.currentUser=e.json.user),e))}}Neo.applyClassConfig(j);var W=o(29);class O extends W.a{static getConfig(){return{className:"RealWorld.view.MainContainer",autoMount:!0,cls:[],controller:j,layout:{ntype:"base"},items:[{module:s,reference:"header"},{module:a}]}}constructor(e){super(e),Neo.config.hash||this._items.splice(1,0,{module:g,flex:1,reference:"home"})}}Neo.applyClassConfig(O);const V=()=>Neo.app({appPath:"apps/realworld/",mainView:O,name:"RealWorld"})}});